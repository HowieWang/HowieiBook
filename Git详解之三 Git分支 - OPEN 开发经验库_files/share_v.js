/*! 4505 2013-9-22 15:54:28 */
define("pjt/content_ex/view/share_v",["lib/jquery/1_9","lib/jh","comp/conf","kit/loadElm","comp/statis","lib/ZeroClipboard"],function(e,t,n,i,r,a){var o=function(){var t={},o={},s=function(n){t.controller=n,o.dom=e('<div class="shareActivity __shareActivity"></div>')[0],t.bindUiEvent()};switch(t.htmlLayout='<div class="main-layout __mainLayout"><div class="_copyLink copyLink" style="display:none;"><span class="copy-link-lable">分享链接: </span><input type="text" id="shareLink" class="text-input" /> <a href="#" class="copyLinkBtn __copyLinkBtn">复制链接</a></div><div id="bdshare" class="bdshare_t bds_tools get-codes-bdshare _shareBtnList"><span class="bdshare-tips">分享到：</span><span><a class="bds_tsina _btn" data-statis-sign="bds_tsina">新浪微博</a></span><span><a class="bds_qzone _btn" data-statis-sign="bds_qzone">QQ空间</a></span><span><a class="bds_renren _btn" data-statis-sign="bds_renren">人人网</a></span><span><a class="bds_tqq _btn" data-statis-sign="bds_tqq">腾讯微博</a></span><span><a class="bds_sqq _btn" data-statis-sign="bds_sqq">QQ好友</a></span></div><a href="#" class="sc-btn _gotoAddTagBtn goto-add-tag-btn" style="display:none;"><span>添加标签</span></a><a href="/" class="sc-btn __seeLink see-link" target="_blank"><span>查看</span></a><a href="#" class="close-s-btn _closeBtn"><span>关闭</span></a></div>',o.setSeeLink=function(e){t.node.seeLink.href=e},o.setSeeLinkText=function(n){e("span",t.node.seeLink).html(n)},o.buildDom=function(n){n.title=n.title||"",t.spec=n;var r=e('<div style="position:absolute;left:0;top:0;width:1p;height:1px;visibility:hidden;overflow:hidden;"></div>')[0],a=e(t.htmlLayout)[0];r.appendChild(a),e("body").append(r),i(a,t);var s={url:n.shareLink};return n.pic&&(s.pic=n.pic),e(t.node.bdshare).attr("data",JSON.stringify(s)),e(t.node.copyLinkBtn).attr("data-clipboard-text",n.shareLink),e(t.node.shareLink).val(n.shareLink),t.bindUiEvent.afterBuiltDom(a),t.setShareConf(n),n.showLink&&(t.setShowLinkStyle(),t.bindCopyBtn()),n.showTagEdit&&e(t.nodes.gotoAddTagBtn).show(),e(o.dom).append(a),a},t.setShowLinkStyle=function(){e(t.node.mainLayout).addClass("show-link")},t.bindCopyBtn=function(){t.oLinkCopy=new a(t.node.copyLinkBtn,{moviePath:n.staticUrl+"/img/comp/ZeroClipboard.swf",allowScriptAccess:"always",trustedOrigins:[n.baseUrl]}),t.oLinkCopy.on("complete",function(n,i){var a=this;this._srcInnerHTML=this.innerHTML,this.innerHTML="复制成功",r.trackEvent("插件保存"+t.spec.type+"后在分享中点击复制链接"),e(o).triggerHandler("copyComplet",{content:i.text}),setTimeout(function(){a.innerHTML=a._srcInnerHTML},3e3)}),e(t.nodes.copyLink).show()},t.createTextByType=function(e){var n="";switch(e){case"image":n="Hi，我正在使用#百度网盘#，给大家分享图片";break;case"article":n=t.spec.title}return n},t.setShareConf=function(n){if(!window.bds_config){var i=document.createElement("script");i.id="bdshare_js",i.setAttribute("data","type=tools&amp;uid=6805663"),e("body").append(i),window.bds_config={bdPopTitle:n.title,bdText:t.createTextByType(n.type)},e.getScript("http://bdimg.share.baidu.com/static/js/shell_v2.js")}},o.on=function(){var t=e(o);t.on.apply(t,arguments)},t.bindUiEvent=function(){var n=function(){e(o.dom).on("click","._closeBtn",t.uiEvent.click_closeBtn),e(o.dom).on("click","._gotoAddTagBtn",t.uiEvent.click_gotoAddTagBtn)};return n.afterBuiltDom=function(n){e("._shareBtnList ._btn",n).on("click",t.uiEvent.click_shareBtnList_btn)},n}(),t.uiEvent={click_shareBtnList_btn:function(t){e(o).triggerHandler("clickShareBtn",{src:this,evt:t})},click_gotoAddTagBtn:function(t){e(o).triggerHandler("clickGotoAddTagBtn",{src:this,evt:t})},click_closeBtn:function(){t.controller.close()}},this+""){case"test":o._pri=t;case"extend":o._init=s;break;default:s.apply(o,arguments)}return o};return o});