/*! 4461 2013-9-17 14:8:14 */
define(["lib/jquery/1_9","lib/jh","kit/loadElm","pjt/content_ex/view/share_v","pjt/content_ex/transport/all"],function(e,t,n,r,o){var i=function(){var n={},i={},a=function(e){i.viewShare=n.buildView(),n.getShareLink(e,function(t){e.shareLink=t.shareLink,i.viewShare.buildDom(e),e.linkText&&i.viewShare.setSeeLinkText(e.linkText),e.linkUrl&&i.viewShare.setSeeLink(e.linkUrl)})};switch(n.buildView=function(e){return r(i,e)},n.buildUiEvent=function(){},i.hide=function(){e(i.viewShare.dom).hide()},i.close=function(){e(i).triggerHandler("close")},i.on=function(){var t=e(i);t.on.apply(t,arguments)},n.getShareLink=function(e,n){var r=t.map(e.key,function(e){return e._key});o.createShareUrl({data:{param:JSON.stringify({records:r,type:e.type}),bdstoken:__CONF__.bdstoken},ok:function(e){n({shareLink:e.data.records[0].link})}})},i.render=function(){return i.viewShare.dom},this+""){case"test":i._pri=n;case"extend":i._init=a;break;default:a.apply(i,arguments)}return i};return i});